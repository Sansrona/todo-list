(this["webpackJsonptodo-app"]=this["webpackJsonptodo-app"]||[]).push([[0],{31:function(t,e,n){},58:function(t,e,n){},59:function(t,e,n){},60:function(t,e,n){},66:function(t,e,n){},67:function(t,e,n){"use strict";n.r(e);var s=n(0),c=n(1),a=n(33),o=n.n(a),i=n(22),r=n(5),d=n(4),l=n.n(d),u=n(2),j=n(19),m=n(15),b=n.n(m),f=n.p+"static/media/remove.94385117.svg",h=n(14),p=(n(58),function(t){var e=t.color,n=t.onClick,c=t.className;return Object(s.jsx)("i",{onClick:n,className:b()("badge",Object(h.a)({},"badge--".concat(e),e),c)})});n(59);var v=function(t){var e=t.items,n=t.isRemovable,c=t.onClick,a=t.onRemove,o=t.onClickItem,i=t.activeItem;return Object(s.jsx)("ul",{className:"list",onClick:c,children:e.map((function(t,e){return Object(s.jsxs)("li",{onClick:o?function(){o(t)}:null,className:b()(t.className,{active:t.active?t.active:i&&i.id===t.id}),children:[Object(s.jsx)("i",{children:t.icon?t.icon:Object(s.jsx)(p,{color:t.color.name})}),Object(s.jsxs)("span",{children:[t.name,t.tasks&&"(".concat(t.tasks.length,")")]}),n&&Object(s.jsx)("img",{className:"list__remove-icon",src:f,alt:"Remove icon",onClick:function(){return function(t){window.confirm("You really want to delete?")&&l.a.delete("https://my-json-server.typicode.com/Sansrona/todo-list/lists/"+t.id).then((function(){a(t.id)}))}(t)}})]},t.name)}))})},O=(n(60),n.p+"static/media/close.a730c5a1.svg"),k=function(t){var e=t.colors,n=t.onAdd,a=Object(c.useState)(!1),o=Object(r.a)(a,2),i=o[0],d=o[1],u=Object(c.useState)(3),m=Object(r.a)(u,2),b=m[0],f=m[1],h=Object(c.useState)(""),k=Object(r.a)(h,2),x=k[0],C=k[1],g=Object(c.useState)(!1),w=Object(r.a)(g,2),N=w[0],y=w[1];Object(c.useEffect)((function(){Array.isArray(e)&&f(e[0].id)}),[e]);var _=function(){d(!1),C(""),f(e[0].id)};return Object(s.jsxs)("div",{className:"add-list",children:[Object(s.jsx)(v,{onClick:function(){return d(!i)},items:[{className:"list__add-button",icon:Object(s.jsxs)("svg",{width:"12",height:"12",viewBox:"0 0 12 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[Object(s.jsx)("path",{d:"M6 1V11",stroke:"purple",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"}),Object(s.jsx)("path",{d:"M1 6H11",stroke:"purple",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})]}),name:"New folder"}]}),i&&Object(s.jsxs)("div",{className:"add-list__popup",children:[Object(s.jsx)("img",{src:O,alt:"close icon",className:"add-list__popup-close-btn",onClick:_}),Object(s.jsx)("input",{value:x,onChange:function(t){return C(t.target.value)},type:"text",placeholder:"Folder name",className:"field"}),Object(s.jsx)("div",{className:"add-list__popup-colors",children:e.map((function(t){return Object(s.jsx)(p,{onClick:function(){return f(t.id)},color:t.name,className:b===t.id&&"active"},t.id)}))}),Object(s.jsx)("button",{onClick:function(){x?(y(!0),l.a.post("https://my-json-server.typicode.com/Sansrona/todo-list/lists",{name:x,colorId:b}).then((function(t){var s=t.data,c=e.filter((function(t){return t.id===b}))[0].name,a=Object(j.a)(Object(j.a)({},s),{},{color:{name:c}});n(a),_()})).catch((function(){alert("Error during adding new folder")})).finally((function(){y(!1)}))):alert("Enter folder name")},className:"button",children:N?"Adding...":"Add folder"})]})]})},x=n.p+"static/media/edit.a9645c72.svg",C=(n(31),n.p+"static/media/add-task.bb82cf25.svg");function g(t){var e=t.list,n=t.addNewTask,a=Object(c.useState)(!1),o=Object(r.a)(a,2),i=o[0],d=o[1],u=Object(c.useState)(""),j=Object(r.a)(u,2),m=j[0],b=j[1],f=Object(c.useState)(!1),h=Object(r.a)(f,2),p=h[0],v=h[1],O=Object(c.useState)(!1),k=Object(r.a)(O,2),x=k[0],g=k[1],w=function(){d(!i),b("")};return Object(s.jsx)("div",{className:"tasks__form",children:i?Object(s.jsxs)("div",{className:"tasks__form-adder",children:[Object(s.jsx)("input",{value:m,onChange:function(t){return b(t.target.value)},type:"text",placeholder:"Task",className:"field"}),Object(s.jsxs)("button",{disabled:x,onClick:function(){if(m){var t={listId:e.id,text:m,completed:!1};v(!0),g(!0),l.a.post("https://my-json-server.typicode.com/Sansrona/todo-list/tasks",t).then((function(t){var s=t.data;n(e.id,s),w()})).catch((function(){alert("error during adding new task")})).finally((function(){g(!1),v(!1)}))}else alert("Enter task name")},className:"button",children:[p?"Adding...":"Add task"," "]}),Object(s.jsx)("button",{onClick:w,className:"button button--grey",children:"Cancel"})]}):Object(s.jsxs)("div",{onClick:w,className:"tasks__form-new",children:[Object(s.jsx)("img",{src:C,alt:"Add Icon"}),Object(s.jsx)("span",{children:"New Task"})]})})}var w=function(t){var e=t.list,n=t.onEditTitle,c=t.addNewTask,a=t.onConfirmed,o=t.withoutEmpty,i=t.onRemoveTask,r=t.onEditTask;return console.log(e.tasks[0]),Object(s.jsxs)("div",{className:"tasks",children:[Object(s.jsxs)("h2",{style:{color:"#".concat(e.color.hex)},className:"tasks__title",children:[e.name," ",Object(s.jsx)("img",{src:x,alt:"edit svg",onClick:function(){var t=window.prompt("List name:",e.name);t&&(n(e.id,t),l.a.patch("https://my-json-server.typicode.com/Sansrona/todo-list/lists/"+e.id,{name:t}).catch((function(){alert("Can not update list name")})))}})," "]}),Object(s.jsxs)("div",{className:"tasks__items",children:[!o&&e.tasks.length<=0&&Object(s.jsx)("h2",{children:"No tasks"}),e.tasks.map((function(t){return Object(s.jsxs)("div",{className:"tasks__items-row",children:[Object(s.jsxs)("div",{className:"checkbox",children:[Object(s.jsx)("input",{onChange:function(n){return a(e.id,t.id,n.target.checked)},id:"task-".concat(t.id),type:"checkbox",checked:t.completed}),Object(s.jsx)("label",{htmlFor:"task-".concat(t.id),children:Object(s.jsx)("svg",{width:"11",height:"8",viewBox:"0 0 11 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{d:"M9.29999 1.20001L3.79999 6.70001L1.29999 4.20001",stroke:"#fff",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"})})})]}),Object(s.jsx)("input",{onChange:function(n){return r(e.id,t.id,n.currentTarget.value)},value:t.text}),Object(s.jsx)("img",{src:f,onClick:function(){return i(e.id,t.id)},className:"tasks__remove-icon",alt:"Remove icon"})]},t.id)}))]}),Object(s.jsx)(g,{list:e,addNewTask:c})]})};var N=function(){var t=Object(c.useState)(null),e=Object(r.a)(t,2),n=e[0],a=e[1],o=Object(c.useState)(null),d=Object(r.a)(o,2),j=d[0],m=d[1],b=Object(c.useState)(null),f=Object(r.a)(b,2),h=f[0],p=f[1],O=Object(u.e)();Object(u.f)(),Object(c.useEffect)((function(){l.a.get("https://my-json-server.typicode.com/Sansrona/todo-list/lists?_expand=color&_embed=tasks").then((function(t){var e=t.data;a(e)})),l.a.get("https://my-json-server.typicode.com/Sansrona/todo-list/colors").then((function(t){var e=t.data;m(e)}))}),[]);var x=function(t,e){var s=n.map((function(n){return n.id===t&&(n.tasks=[].concat(Object(i.a)(n.tasks),[e])),n}));a(s)},C=function(t,e){var s=n.map((function(n){return n.id===t&&(n.name=e),n}));a(s)};Object(c.useEffect)((function(){var t=O.location.pathname.split("lists/")[1];if(n){var e=n.find((function(e){return e.id===Number(t)}));p(e)}}),[O.location.pathname]);var g=function(t,e){var s=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.filter((function(t){return t.id!==e}))),n}));a(s),l.a.delete("https://my-json-server.typicode.com/Sansrona/todo-list/tasks/".concat(e)).catch((function(){alert("Can not delete task")}))},N=function(t,e,s){var c=n.map((function(n){return n.id===t&&(n.tasks=n.tasks.map((function(t){return t.id===e&&(t.completed=s),t}))),n}));a(c),l.a.patch("https://my-json-server.typicode.com/Sansrona/todo-list/tasks/".concat(e),{completed:s}).catch((function(){alert("Can not edit task status")}))};return Object(s.jsxs)("div",{className:"todo",children:[Object(s.jsxs)("div",{className:"todo__sidebar",children:[Object(s.jsx)(v,{items:[{icon:Object(s.jsx)("svg",{width:"14",height:"12",viewBox:"0 0 14 12",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:Object(s.jsx)("path",{d:"M10.96 5.10001H5.74001C5.24321 5.10001 5.20001 5.50231 5.20001 6.00001C5.20001 6.49771 5.24321 6.90001 5.74001 6.90001H10.96C11.4568 6.90001 11.5 6.49771 11.5 6.00001C11.5 5.50231 11.4568 5.10001 10.96 5.10001ZM12.76 9.60001H5.74001C5.24321 9.60001 5.20001 10.0023 5.20001 10.5C5.20001 10.9977 5.24321 11.4 5.74001 11.4H12.76C13.2568 11.4 13.3 10.9977 13.3 10.5C13.3 10.0023 13.2568 9.60001 12.76 9.60001ZM5.74001 2.40001H12.76C13.2568 2.40001 13.3 1.99771 13.3 1.50001C13.3 1.00231 13.2568 0.600006 12.76 0.600006H5.74001C5.24321 0.600006 5.20001 1.00231 5.20001 1.50001C5.20001 1.99771 5.24321 2.40001 5.74001 2.40001ZM2.86001 5.10001H1.24001C0.743212 5.10001 0.700012 5.50231 0.700012 6.00001C0.700012 6.49771 0.743212 6.90001 1.24001 6.90001H2.86001C3.35681 6.90001 3.40001 6.49771 3.40001 6.00001C3.40001 5.50231 3.35681 5.10001 2.86001 5.10001ZM2.86001 9.60001H1.24001C0.743212 9.60001 0.700012 10.0023 0.700012 10.5C0.700012 10.9977 0.743212 11.4 1.24001 11.4H2.86001C3.35681 11.4 3.40001 10.9977 3.40001 10.5C3.40001 10.0023 3.35681 9.60001 2.86001 9.60001ZM2.86001 0.600006H1.24001C0.743212 0.600006 0.700012 1.00231 0.700012 1.50001C0.700012 1.99771 0.743212 2.40001 1.24001 2.40001H2.86001C3.35681 2.40001 3.40001 1.99771 3.40001 1.50001C3.40001 1.00231 3.35681 0.600006 2.86001 0.600006Z",fill:"#7C7C7C"})}),name:"All tasks",active:"/"===O.location.pathname}],onClickItem:function(){O.push("/")}}),n?Object(s.jsx)(v,{items:n,onRemove:function(t){var e=n.filter((function(e){return e.id!==t}));a(e)},onClickItem:function(t){O.push("/lists/".concat(t.id))},activeItem:h,isRemovable:!0}):"Loading...",Object(s.jsx)(k,{onAdd:function(t){var e=[].concat(Object(i.a)(n),[t]);a(e)},colors:j})]}),Object(s.jsxs)("div",{className:"todo__tasks",children:[Object(s.jsx)(u.a,{exact:!0,path:"/",children:n&&n.map((function(t){return Object(s.jsx)(w,{list:t,onConfirmed:N,onRemoveTask:g,addNewTask:x,onEditTitle:C,withoutEmpty:!0},t.id)}))}),Object(s.jsx)(u.a,{path:"/lists/:id",children:n&&h&&Object(s.jsx)(w,{list:h,onConfirmed:N,onEditTask:function(t,e,s){var c=n.map((function(n){return n.id===t&&n.tasks.map((function(t){return t.id===e&&(t.text=s),t})),n}));a(c),l.a.patch("https://my-json-server.typicode.com/Sansrona/todo-list/tasks/".concat(e),{text:s}).catch((function(){alert("Can not edit task name")}))},onRemoveTask:g,addNewTask:x,onEditTitle:C})})]})]})},y=n(18);n(66);o.a.render(Object(s.jsx)(y.a,{children:Object(s.jsx)(N,{})}),document.getElementById("root"))}},[[67,1,2]]]);
//# sourceMappingURL=main.01eee985.chunk.js.map